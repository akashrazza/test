
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="/Users/rajakumar/Desktop/Full stack html:css:bootstarp/css/style.css">
        <title>Lazeez Resturent</title>
    </head>
    <body background="white" style="padding: 100px;">
        <h1 style="text-align: center;">Employee Table</h1>
        <input style="    margin-bottom: 10px;" onclick="Add()" type="button" value="Add">
        <table class="table">
            <thead>
              <tr>
                <th scope="col">Emp id</th>
                <th scope="col">Employee Name</th>
                <th scope="col">Employee salary</th>
                <th scope="col">Email</th>
                <th scope="col">Mobile Number</th>
                <th scope="col">Button</th>
              </tr>
            </thead>
            <tbody id="table-body">
            </tbody>
          </table>
    </body>
    <script>
        
        const Data = [{
            "Name":"Emp1",
            "Salary":"20000",
            "Email":"test@test.com",
            "mobile":"1234567890"
        }]

        //Show Data to table
        function IterateData(add = false){
                var BodyElement = document.getElementById('table-body');
                BodyElement.innerHTML = '';

                //Itrate over Data Array
                for(i = 0; i < Data.length; i++){
                    //Edit Button 
                    var EditButton = document.createElement('input');
                    EditButton.setAttribute('type','button');
                    EditButton.setAttribute('onClick','Edit('+i+')');
                    EditButton.setAttribute('value','Edit')

                    //Delete Button
                    var DeleteButton = document.createElement('input');
                    DeleteButton.setAttribute('type','button');
                    DeleteButton.setAttribute('onClick','Delete('+i+')');
                    DeleteButton.setAttribute('value','Delete');

                    //Table cell Combining Edit and Delete (Table cell 6)
                    var ButtonCell = document.createElement('td');
                    ButtonCell.appendChild(DeleteButton);
                    ButtonCell.appendChild(EditButton);

                    //Table Row
                    var RowElement = document.createElement('tr');
                    RowElement.setAttribute('id','row'+i);

                    //Table Cell 1
                    var headElement = document.createElement('th');
                    headElement.setAttribute('scope','row');
                    var textIndex  = document.createTextNode(i+1);
                    headElement.appendChild(textIndex);

                    //Table cell 2
                    var NameElement  = document.createElement('td');
                    var NameText = document.createTextNode(Data[i].Name);
                    NameElement.appendChild(NameText);

                    //Table cell 3
                    var SalaryElement  = document.createElement('td');
                    var SalaryText = document.createTextNode(Data[i].Salary);
                    SalaryElement.appendChild(SalaryText);

                    //Table cell 4
                    var EmailElement  = document.createElement('td');
                    var EmailText = document.createTextNode(Data[i].Email);
                    EmailElement.appendChild(EmailText);

                    //Table cell 5
                    var MobileElement  = document.createElement('td');
                    var MobileText = document.createTextNode(Data[i].mobile);
                    MobileElement.appendChild(MobileText);

                    //Assiging cells to Row
                    RowElement.appendChild(headElement);
                    RowElement.appendChild(NameElement);
                    RowElement.appendChild(SalaryElement);
                    RowElement.appendChild(EmailElement);
                    RowElement.appendChild(MobileElement);
                    RowElement.appendChild(ButtonCell);

                    //Attaching Row to table body
                    BodyElement.appendChild(RowElement);

            }
        }
        IterateData()
        function Add(){
            Data.push(
                {
                    "Name" : "",
                    "Salary" : "",
                    "Email" : "",
                    "mobile" : ""
                }
            );
            //Index of data pushed
            var i = Data.length-1
            
            //Save Button
            var SaveButton = document.createElement('input');
            SaveButton.setAttribute('type','button');
            SaveButton.setAttribute('onClick','Save('+i+')');
            SaveButton.setAttribute('value','Save')
            
            //Delete Button
            var DeleteButton = document.createElement('input');
            DeleteButton.setAttribute('type','button');
            DeleteButton.setAttribute('onClick','Delete('+i+')');
            DeleteButton.setAttribute('value','Delete');
            
            //Assigning Delete and Save (table Row 6)
            var ButtonCell = document.createElement('td');
            ButtonCell.appendChild(DeleteButton);
            ButtonCell.appendChild(SaveButton);
            
            //Adding Row into Table
            var RowElement = document.createElement('tr');
            RowElement.setAttribute('id','row'+i);

            //Table cell 1
            var headElement = document.createElement('th');
            headElement.setAttribute('scope','row');
            var textIndex  = document.createTextNode(i+1);
            headElement.appendChild(textIndex);

            //table cell 2
            var NameElement  = document.createElement('td');
            var NameInput = document.createElement('input');
            NameInput.setAttribute('type','text');
            NameInput.setAttribute('Placeholder','Name');
            NameInput.setAttribute('id','input1');
            NameElement.appendChild(NameInput);

            //Table cell 3
            var SalaryElement  = document.createElement('td');
            var SalaryInput = document.createElement('input');
            SalaryInput.setAttribute('type','text');
            SalaryInput.setAttribute('Placeholder','Salary');
            SalaryInput.setAttribute('id','input2');
            SalaryElement.appendChild(SalaryInput);

            // Table cell 4
            var EmailElement  = document.createElement('td');
            var EmailInput = document.createElement('input');
            EmailInput.setAttribute('type','text');
            EmailInput.setAttribute('Placeholder','Email');
            EmailInput.setAttribute('id','input3');
            EmailElement.appendChild(EmailInput);

            //Table cell 5
            var MobileElement  = document.createElement('td');
            var MobileInput = document.createElement('input');
            MobileInput.setAttribute('type','text');
            MobileInput.setAttribute('Placeholder','Email');
            MobileInput.setAttribute('id','input4');
            MobileElement.appendChild(MobileInput);

            //Adding Cells to Row
            RowElement.appendChild(headElement);
            RowElement.appendChild(NameElement);
            RowElement.appendChild(SalaryElement);
            RowElement.appendChild(EmailElement);
            RowElement.appendChild(MobileElement);
            RowElement.appendChild(ButtonCell);
            
            //Adding Row to Table Body
            var element = document.getElementById("table-body");
            element.appendChild(RowElement);
            
        }

        //Edit Button Operation
        function Edit( i ){
            //Getting the row 
            var RowElement = document.getElementById('row'+i)
            RowElement.innerHTML = '';

            //Save Button
            var SaveButton = document.createElement('input');
            SaveButton.setAttribute('type','button');
            SaveButton.setAttribute('onClick','Save('+i+')');
            SaveButton.setAttribute('value','Save')

            //Delete Button
            var DeleteButton = document.createElement('input');
            DeleteButton.setAttribute('type','button');
            DeleteButton.setAttribute('onClick','Delete('+i+')');
            DeleteButton.setAttribute('value','Delete');

            //Adding Buttons to cell (cell 6)
            var ButtonCell = document.createElement('td');
            ButtonCell.appendChild(DeleteButton);
            ButtonCell.appendChild(SaveButton);

            //Table cell 1
            var headElement = document.createElement('th');
            headElement.setAttribute('scope','row');
            var textIndex  = document.createTextNode(i+1);
            headElement.appendChild(textIndex);

            //Input Table cell 2
            var NameElement  = document.createElement('td');
            var NameInput = document.createElement('input');
            NameInput.setAttribute('type','text');
            NameInput.setAttribute('value',Data[i].Name);
            NameInput.setAttribute('Placeholder','Name');
            NameInput.setAttribute('id','input1');
            NameElement.appendChild(NameInput);

            //Input Table cell 3
            var SalaryElement  = document.createElement('td');
            var SalaryInput = document.createElement('input');
            SalaryInput.setAttribute('type','text');
            SalaryInput.setAttribute('value',Data[i].Salary);
            SalaryInput.setAttribute('Placeholder','Salary');
            SalaryInput.setAttribute('id','input2');
            SalaryElement.appendChild(SalaryInput);

            //Input Table cell 4
            var EmailElement  = document.createElement('td');
            var EmailInput = document.createElement('input');
            EmailInput.setAttribute('type','text');
            EmailInput.setAttribute('value',Data[i].Email);
            EmailInput.setAttribute('Placeholder','Email');
            EmailInput.setAttribute('id','input3');
            EmailElement.appendChild(EmailInput);

            //Input Table cell 5
            var MobileElement  = document.createElement('td');
            var MobileInput = document.createElement('input');
            MobileInput.setAttribute('type','text');
            MobileInput.setAttribute('value',Data[i].mobile);
            MobileInput.setAttribute('Placeholder','Email');
            MobileInput.setAttribute('id','input4');
            MobileElement.appendChild(MobileInput);

            //Appending all cells to row
            RowElement.appendChild(headElement);
            RowElement.appendChild(NameElement);
            RowElement.appendChild(SalaryElement);
            RowElement.appendChild(EmailElement);
            RowElement.appendChild(MobileElement);
            RowElement.appendChild(ButtonCell);
        }

        //Delete Button Opeartion
        function Delete(i){
            Data.splice(i,1);
            var BodyElement = document.getElementById('table-body');
            var rowSelected = document.getElementById('row'+i);
            BodyElement.removeChild(rowSelected);
        }

        //Save Button Opeartion
        function Save(i){
            
            var input1 = document.getElementById('input1').value;
            var input2 = document.getElementById('input2').value;
            var input3 = document.getElementById('input3').value;
            var input4 = document.getElementById('input4').value;

            var reEmail = /\S+@\S+\.\S+/;
            boolEmail = reEmail.test(input3);

            var mobile = /^([+]\d{2})?\d{10}$/
            boolMObile = mobile.test(input4);

            var salary = /^\d+$/;
            boolsalary  = salary.test(input2);

            if(!boolsalary || !boolEmail || !boolMObile){
                alert("Please provide valid data");
            }
            else{
                var test  = {
                    "Name":input1,
                    "Salary":input2,
                    "Email":input3,
                    "mobile":input4,
                }

                Data[i] = test;
                IterateData();
            }
            
        }
        
    </script>
</html>
